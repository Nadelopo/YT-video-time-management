(function(){"use strict";function w(n){return new Promise(e=>{if(document.querySelector(n))return e(document.querySelector(n));const t=new MutationObserver(o=>{document.querySelector(n)&&(e(document.querySelector(n)),t.disconnect())});t.observe(document.body,{childList:!0,subtree:!0})})}function F(n,e){var t=Z(n),o=t.tag,r=t.id,i=t.className,a=e?document.createElementNS(e,o):document.createElement(o);return r&&(a.id=r),i&&(e?a.setAttribute("class",i):a.className=i),a}function Z(n){for(var e=n.split(/([.#])/),t="",o="",r=1;r<e.length;r+=2)switch(e[r]){case".":t+=" "+e[r+1];break;case"#":o=e[r+1]}return{className:t.trim(),tag:e[0]||"div",id:o}}function L(n,e){var t=l(n),o=l(e);return e===o&&o.__redom_view&&(e=o.__redom_view),o.parentNode&&(j(e,o,t),t.removeChild(o)),e}function j(n,e,t){var o=e.__redom_lifecycle;if(I(o)){e.__redom_lifecycle={};return}var r=t;for(e.__redom_mounted&&g(e,"onunmount");r;){var i=r.__redom_lifecycle||{};for(var a in o)i[a]&&(i[a]-=o[a]);I(i)&&(r.__redom_lifecycle=null),r=r.parentNode}}function I(n){if(n==null)return!0;for(var e in n)if(n[e])return!1;return!0}var H=["onmount","onremount","onunmount"],U=typeof window<"u"&&"ShadowRoot"in window;function _(n,e,t,o){var r=l(n),i=l(e);e===i&&i.__redom_view&&(e=i.__redom_view),e!==i&&(i.__redom_view=e);var a=i.__redom_mounted,u=i.parentNode;if(a&&u!==r&&j(e,i,u),t!=null)if(o){var c=l(t);c.__redom_mounted&&g(c,"onunmount"),r.replaceChild(i,c)}else r.insertBefore(i,l(t));else r.appendChild(i);return B(e,i,r,u),e}function g(n,e){e==="onmount"||e==="onremount"?n.__redom_mounted=!0:e==="onunmount"&&(n.__redom_mounted=!1);var t=n.__redom_lifecycle;if(t){var o=n.__redom_view,r=0;o&&o[e]&&o[e]();for(var i in t)i&&r++;if(r)for(var a=n.firstChild;a;){var u=a.nextSibling;g(a,e),a=u}}}function B(n,e,t,o){for(var r=e.__redom_lifecycle||(e.__redom_lifecycle={}),i=t===o,a=!1,u=0,c=H;u<c.length;u+=1){var d=c[u];i||n!==e&&d in n&&(r[d]=(r[d]||0)+1),r[d]&&(a=!0)}if(!a){e.__redom_lifecycle={};return}var s=t,f=!1;for((i||s&&s.__redom_mounted)&&(g(e,i?"onremount":"onmount"),f=!0);s;){var N=s.parentNode,q=s.__redom_lifecycle||(s.__redom_lifecycle={});for(var b in r)q[b]=(q[b]||0)+r[b];if(f)break;(s.nodeType===Node.DOCUMENT_NODE||U&&s instanceof ShadowRoot||N&&N.__redom_mounted)&&(g(s,i?"onremount":"onmount"),f=!0),s=N}}function J(n,e,t){var o=l(n);if(typeof e=="object")for(var r in e)D(o,r,e[r]);else D(o,e,t)}function D(n,e,t){n.style[e]=t??""}var S="http://www.w3.org/1999/xlink";function C(n,e,t,o){var r=l(n),i=typeof e=="object";if(i)for(var a in e)C(r,a,e[a],o);else{var u=r instanceof SVGElement,c=typeof t=="function";if(e==="style"&&typeof t=="object")J(r,t);else if(u&&c)r[e]=t;else if(e==="dataset")h(r,t);else if(!u&&(e in r||c)&&e!=="list")r[e]=t;else{if(u&&e==="xlink"){A(r,t);return}o&&e==="class"&&(t=r.className+" "+t),t==null?r.removeAttribute(e):r.setAttribute(e,t)}}}function A(n,e,t){if(typeof e=="object")for(var o in e)A(n,o,e[o]);else t!=null?n.setAttributeNS(S,e,t):n.removeAttributeNS(S,e,t)}function h(n,e,t){if(typeof e=="object")for(var o in e)h(n,o,e[o]);else t!=null?n.dataset[e]=t:delete n.dataset[e]}function K(n){return document.createTextNode(n??"")}function T(n,e,t){for(var o=0,r=e;o<r.length;o+=1){var i=r[o];if(!(i!==0&&!i)){var a=typeof i;a==="function"?i(n):a==="string"||a==="number"?n.appendChild(K(i)):E(l(i))?_(n,i):i.length?T(n,i,t):a==="object"&&C(n,i,null,t)}}}function l(n){return n.nodeType&&n||!n.el&&n||l(n.el)}function E(n){return n&&n.nodeType}function v(n){for(var e=[],t=arguments.length-1;t-- >0;)e[t]=arguments[t+1];var o,r=typeof n;if(r==="string")o=F(n);else if(r==="function"){var i=n;o=new(Function.prototype.bind.apply(i,[null].concat(e)))}else throw new Error("At least one argument required");return T(l(o),e,!0),o}var m=v;v.extend=function(){for(var n=[],e=arguments.length;e--;)n[e]=arguments[e];return v.bind.apply(v,[this].concat(n))};function z(n){for(var e=[],t=arguments.length-1;t-- >0;)e[t]=arguments[t+1];for(var o=l(n),r=O(n,e,o.firstChild);r;){var i=r.nextSibling;L(n,r),r=i}}function O(n,e,t){for(var o=t,r=Array(e.length),i=0;i<e.length;i++)r[i]=e[i]&&l(e[i]);for(var a=0;a<e.length;a++){var u=e[a];if(u){var c=r[a];if(c===o){o=o.nextSibling;continue}if(E(c)){var d=o&&o.nextSibling,s=u.__redom_index!=null,f=s&&d===r[a+1];_(n,u,o,f),f&&(o=d);continue}u.length!=null&&(o=O(n,u,o))}}return o}const X="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0iY3VycmVudENvbG9yIiBjbGFzcz0iYmkgYmktZ2Vhci1maWxsIiB2aWV3Qm94PSIwIDAgMTYgMTYiPg0KICA8cGF0aCBkPSJNOS40MDUgMS4wNWMtLjQxMy0xLjQtMi4zOTctMS40LTIuODEgMGwtLjEuMzRhMS40NjQgMS40NjQgMCAwIDEtMi4xMDUuODcybC0uMzEtLjE3Yy0xLjI4My0uNjk4LTIuNjg2LjcwNS0xLjk4NyAxLjk4N2wuMTY5LjMxMWMuNDQ2LjgyLjAyMyAxLjg0MS0uODcyIDIuMTA1bC0uMzQuMWMtMS40LjQxMy0xLjQgMi4zOTcgMCAyLjgxbC4zNC4xYTEuNDY0IDEuNDY0IDAgMCAxIC44NzIgMi4xMDVsLS4xNy4zMWMtLjY5OCAxLjI4My43MDUgMi42ODYgMS45ODcgMS45ODdsLjMxMS0uMTY5YTEuNDY0IDEuNDY0IDAgMCAxIDIuMTA1Ljg3MmwuMS4zNGMuNDEzIDEuNCAyLjM5NyAxLjQgMi44MSAwbC4xLS4zNGExLjQ2NCAxLjQ2NCAwIDAgMSAyLjEwNS0uODcybC4zMS4xN2MxLjI4My42OTggMi42ODYtLjcwNSAxLjk4Ny0xLjk4N2wtLjE2OS0uMzExYTEuNDY0IDEuNDY0IDAgMCAxIC44NzItMi4xMDVsLjM0LS4xYzEuNC0uNDEzIDEuNC0yLjM5NyAwLTIuODFsLS4zNC0uMWExLjQ2NCAxLjQ2NCAwIDAgMS0uODcyLTIuMTA1bC4xNy0uMzFjLjY5OC0xLjI4My0uNzA1LTIuNjg2LTEuOTg3LTEuOTg3bC0uMzExLjE2OWExLjQ2NCAxLjQ2NCAwIDAgMS0yLjEwNS0uODcybC0uMS0uMzR6TTggMTAuOTNhMi45MjkgMi45MjkgMCAxIDEgMC01Ljg2IDIuOTI5IDIuOTI5IDAgMCAxIDAgNS44NTh6Ii8+DQo8L3N2Zz4=",$=(n,e)=>{const t=new DOMParser().parseFromString(atob(n.replace(/data:image\/svg\+xml;base64,/,"")),"image/svg+xml").querySelector("svg");return e&&t.classList.add(e),t},ee=`#owner .menu__root{position:relative;margin-left:10px}#owner .menu__root .settings{cursor:pointer;transition:.3s;user-select:none}#owner .menu__root .settings:hover{transform:rotate(180deg) scale(1.1)}#owner .menu__root .content{position:absolute;top:0;left:30px;background:#1c1c1c;border-radius:8px;width:240px;height:260px;z-index:100;animation:menuOpen .2s;padding:12px;box-sizing:border-box;font-size:14px}#owner .menu__root .content.close{animation:menuClose .1s}#owner .menu__root .content .content__loop{display:grid;grid-template-columns:60px auto 1fr auto 1fr;align-items:center;gap:4px}#owner .menu__root .content .content__loop .loop{display:flex;gap:4px;align-items:center}#owner .menu__root .content input{margin:4px 0;border:none;border-radius:4px;background:#363636;color:#fff;outline:none;width:24px;text-align:center}#owner .menu__root .content input::-webkit-inner-spin-button{-webkit-appearance:none;margin:0}@keyframes menuOpen{0%{opacity:.6;transform:scale(0)}to{opacity:1;transform:scale(1)}}@keyframes menuClose{0%{opacity:1;transform:scale(1)}to{opacity:.6;transform:scale(0)}}.mb-6{margin-bottom:6px}.mt-8{margin-top:6px}.btn{font-family:Roboto;font-size:16px;cursor:pointer;border-radius:10px;outline:none;color:#1c1c1c;background:#363636;padding:2px 6px 1px;transition:.4s;border:2px solid #363636;width:100%;color:#fff}.btn:hover{background:#1c1c1c}
`;class M{constructor(e){this.el=m("input",{className:e??"",type:"number",value:"00",min:0,max:60,maxlength:2})}}class k{constructor(e,t,o){this.el=m("div",{className:"content__loop"}),z(this.el,[m("div",e+":"),m("div","min."),t,m("div","sec."),o])}}GM_addStyle(ee);const y=m("div",{className:"menu__root"}),Y=new M().el,Q=new M().el,G=new M().el,W=new M().el,p=m("div",{className:"content"}),ne=new k("start",Q,Y),te=new k("end",W,G),P=m("button","apply",{className:"btn mt-8"}),V=m("button","cancel",{className:"btn mt-8"});z(p,[m("div","loop video time",{className:"mb-6"}),ne,te,P,V]);let x=!0;const R=$(X,"settings"),oe=()=>{p.classList.add("close"),setTimeout(()=>{L(y,p),p.classList.remove("close")},100)};R.onclick=()=>{x?_(y,p):oe(),x=!x},_(y,R),(async()=>{let n=0,e=0,t=0,o=0,r=!1,i=await w("#ytd-player");const a=await w(".item.style-scope.ytd-watch-metadata");_(a,y);function u(c){console.log("change"),c==1&&(o=setInterval(()=>{(t>=e||t<n)&&(clearInterval(o),i.player_.seekTo(n)),t=i.player_.getCurrentTime()},1e3)),(c==2||c==3||c==0)&&clearInterval(o)}P.onclick=()=>{n=Number(Q.value)*60+Number(Y.value),e=Number(W.value)*60+Number(G.value),r||(u(1),setTimeout(()=>{i.player_.addEventListener("onStateChange",u)},1e3),r=!0)},V.onclick=()=>{clearInterval(o),i.player_.removeEventListener("onStateChange",u),r=!1}})()})();
