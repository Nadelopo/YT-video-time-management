(function(){"use strict";const _e=(e,t)=>e===t,T=Symbol("solid-proxy"),G=Symbol("solid-track"),D={equals:_e};let ne=re;const v=1,j=2,se={owned:null,cleanups:null,context:null,owner:null};var p=null;let H=null,a=null,m=null,$=null,M=0;function X(e,t){const n=a,s=p,i=e.length===0,l=i?se:{owned:null,cleanups:null,context:null,owner:t===void 0?s:t},o=i?e:()=>e(()=>_(()=>q(l)));p=l,a=null;try{return O(o,!0)}finally{a=n,p=s}}function S(e,t){t=t?Object.assign({},D,t):D;const n={value:e,observers:null,observerSlots:null,comparator:t.equals||void 0},s=i=>(typeof i=="function"&&(i=i(n.value)),oe(n,i));return[ie.bind(n),s]}function x(e,t,n){const s=Q(e,t,!1,v);N(s)}function z(e,t,n){ne=Ce;const s=Q(e,t,!1,v);(!n||!n.render)&&(s.user=!0),$?$.push(s):N(s)}function I(e,t,n){n=n?Object.assign({},D,n):D;const s=Q(e,t,!0,0);return s.observers=null,s.observerSlots=null,s.comparator=n.equals||void 0,N(s),ie.bind(s)}function R(e){return O(e,!1)}function _(e){if(a===null)return e();const t=a;a=null;try{return e()}finally{a=t}}function V(e){z(()=>_(e))}function ke(e){return p===null||(p.cleanups===null?p.cleanups=[e]:p.cleanups.push(e)),e}function le(){return a}function ie(){if(this.sources&&this.state)if(this.state===v)N(this);else{const e=m;m=null,O(()=>U(this),!1),m=e}if(a){const e=this.observers?this.observers.length:0;a.sources?(a.sources.push(this),a.sourceSlots.push(e)):(a.sources=[this],a.sourceSlots=[e]),this.observers?(this.observers.push(a),this.observerSlots.push(a.sources.length-1)):(this.observers=[a],this.observerSlots=[a.sources.length-1])}return this.value}function oe(e,t,n){let s=e.value;return(!e.comparator||!e.comparator(s,t))&&(e.value=t,e.observers&&e.observers.length&&O(()=>{for(let i=0;i<e.observers.length;i+=1){const l=e.observers[i],o=H&&H.running;o&&H.disposed.has(l),(o?!l.tState:!l.state)&&(l.pure?m.push(l):$.push(l),l.observers&&ce(l)),o||(l.state=v)}if(m.length>1e6)throw m=[],new Error},!1)),t}function N(e){if(!e.fn)return;q(e);const t=p,n=a,s=M;a=p=e,Ae(e,e.value,s),a=n,p=t}function Ae(e,t,n){let s;try{s=e.fn(t)}catch(i){return e.pure&&(e.state=v,e.owned&&e.owned.forEach(q),e.owned=null),e.updatedAt=n+1,ue(i)}(!e.updatedAt||e.updatedAt<=n)&&(e.updatedAt!=null&&"observers"in e?oe(e,s):e.value=s,e.updatedAt=n)}function Q(e,t,n,s=v,i){const l={fn:e,state:s,updatedAt:null,owned:null,sources:null,sourceSlots:null,cleanups:null,value:t,owner:p,context:null,pure:n};return p===null||p!==se&&(p.owned?p.owned.push(l):p.owned=[l]),l}function B(e){if(e.state===0)return;if(e.state===j)return U(e);if(e.suspense&&_(e.suspense.inFallback))return e.suspense.effects.push(e);const t=[e];for(;(e=e.owner)&&(!e.updatedAt||e.updatedAt<M);)e.state&&t.push(e);for(let n=t.length-1;n>=0;n--)if(e=t[n],e.state===v)N(e);else if(e.state===j){const s=m;m=null,O(()=>U(e,t[0]),!1),m=s}}function O(e,t){if(m)return e();let n=!1;t||(m=[]),$?n=!0:$=[],M++;try{const s=e();return xe(n),s}catch(s){n||($=null),m=null,ue(s)}}function xe(e){if(m&&(re(m),m=null),e)return;const t=$;$=null,t.length&&O(()=>ne(t),!1)}function re(e){for(let t=0;t<e.length;t++)B(e[t])}function Ce(e){let t,n=0;for(t=0;t<e.length;t++){const s=e[t];s.user?e[n++]=s:B(s)}for(t=0;t<n;t++)B(e[t])}function U(e,t){e.state=0;for(let n=0;n<e.sources.length;n+=1){const s=e.sources[n];if(s.sources){const i=s.state;i===v?s!==t&&(!s.updatedAt||s.updatedAt<M)&&B(s):i===j&&U(s,t)}}}function ce(e){for(let t=0;t<e.observers.length;t+=1){const n=e.observers[t];n.state||(n.state=j,n.pure?m.push(n):$.push(n),n.observers&&ce(n))}}function q(e){let t;if(e.sources)for(;e.sources.length;){const n=e.sources.pop(),s=e.sourceSlots.pop(),i=n.observers;if(i&&i.length){const l=i.pop(),o=n.observerSlots.pop();s<i.length&&(l.sourceSlots[o]=s,i[s]=l,n.observerSlots[s]=o)}}if(e.owned){for(t=e.owned.length-1;t>=0;t--)q(e.owned[t]);e.owned=null}if(e.cleanups){for(t=e.cleanups.length-1;t>=0;t--)e.cleanups[t]();e.cleanups=null}e.state=0,e.context=null}function ue(e){throw e}const fe=Symbol("fallback");function ae(e){for(let t=0;t<e.length;t++)e[t]()}function Oe(e,t,n={}){let s=[],i=[],l=[],o=[],r=0,c;return ke(()=>ae(l)),()=>{const u=e()||[];return u[G],_(()=>{if(u.length===0)return r!==0&&(ae(l),l=[],s=[],i=[],r=0,o=[]),n.fallback&&(s=[fe],i[0]=X(g=>(l[0]=g,n.fallback())),r=1),i;for(s[0]===fe&&(l[0](),l=[],s=[],i=[],r=0),c=0;c<u.length;c++)c<s.length&&s[c]!==u[c]?o[c](()=>u[c]):c>=s.length&&(i[c]=X(h));for(;c<s.length;c++)l[c]();return r=o.length=l.length=u.length,s=u.slice(0),i=i.slice(0,r)});function h(g){l[c]=g;const[f,d]=S(u[c]);return o[c]=d,t(f,c)}}}function y(e,t){return _(()=>e(t||{}))}const Ee=e=>`Stale read from <${e}>.`;function Pe(e){const t="fallback"in e&&{fallback:()=>e.fallback};return I(Oe(()=>e.each,e.children,t||void 0))}function Ie(e){const t=e.keyed,n=I(()=>e.when,void 0,{equals:(s,i)=>t?s===i:!s==!i});return I(()=>{const s=n();if(s){const i=e.children;return typeof i=="function"&&i.length>0?_(()=>i(t?s:()=>{if(!_(n))throw Ee("Show");return e.when})):i}return e.fallback},void 0,void 0)}function Ne(e,t,n){let s=n.length,i=t.length,l=s,o=0,r=0,c=t[i-1].nextSibling,u=null;for(;o<i||r<l;){if(t[o]===n[r]){o++,r++;continue}for(;t[i-1]===n[l-1];)i--,l--;if(i===o){const h=l<s?r?n[r-1].nextSibling:n[l-r]:c;for(;r<l;)e.insertBefore(n[r++],h)}else if(l===r)for(;o<i;)(!u||!u.has(t[o]))&&t[o].remove(),o++;else if(t[o]===n[l-1]&&n[r]===t[i-1]){const h=t[--i].nextSibling;e.insertBefore(n[r++],t[o++].nextSibling),e.insertBefore(n[--l],h),t[i]=n[l]}else{if(!u){u=new Map;let g=r;for(;g<l;)u.set(n[g],g++)}const h=u.get(t[o]);if(h!=null)if(r<h&&h<l){let g=o,f=1,d;for(;++g<i&&g<l&&!((d=u.get(t[g]))==null||d!==h+f);)f++;if(f>h-r){const k=t[o];for(;r<h;)e.insertBefore(n[r++],k)}else e.replaceChild(n[r++],t[o++])}else o++;else t[o++].remove()}}}const de="_$DX_DELEGATE";function Le(e,t,n,s={}){let i;return X(l=>{i=l,t===document?e():E(t,e(),t.firstChild?null:void 0,n)},s.owner),()=>{i(),t.textContent=""}}function w(e,t,n){let s;const i=()=>{const o=document.createElement("template");return o.innerHTML=e,n?o.content.firstChild.firstChild:o.content.firstChild},l=t?()=>_(()=>document.importNode(s||(s=i()),!0)):()=>(s||(s=i())).cloneNode(!0);return l.cloneNode=l,l}function F(e,t=window.document){const n=t[de]||(t[de]=new Set);for(let s=0,i=e.length;s<i;s++){const l=e[s];n.has(l)||(n.add(l),t.addEventListener(l,je))}}function De(e,t){t==null?e.removeAttribute("class"):e.className=t}function E(e,t,n,s){if(n!==void 0&&!s&&(s=[]),typeof t!="function")return K(e,t,s,n);x(i=>K(e,t(),i,n),s)}function je(e){const t=`$$${e.type}`;let n=e.composedPath&&e.composedPath()[0]||e.target;for(e.target!==n&&Object.defineProperty(e,"target",{configurable:!0,value:n}),Object.defineProperty(e,"currentTarget",{configurable:!0,get(){return n||document}});n;){const s=n[t];if(s&&!n.disabled){const i=n[`${t}Data`];if(i!==void 0?s.call(n,i,e):s.call(n,e),e.cancelBubble)return}n=n._$host||n.parentNode||n.host}}function K(e,t,n,s,i){for(;typeof n=="function";)n=n();if(t===n)return n;const l=typeof t,o=s!==void 0;if(e=o&&n[0]&&n[0].parentNode||e,l==="string"||l==="number")if(l==="number"&&(t=t.toString()),o){let r=n[0];r&&r.nodeType===3?r.data=t:r=document.createTextNode(t),n=P(e,n,s,r)}else n!==""&&typeof n=="string"?n=e.firstChild.data=t:n=e.textContent=t;else if(t==null||l==="boolean")n=P(e,n,s);else{if(l==="function")return x(()=>{let r=t();for(;typeof r=="function";)r=r();n=K(e,r,n,s)}),()=>n;if(Array.isArray(t)){const r=[],c=n&&Array.isArray(n);if(Y(r,t,n,i))return x(()=>n=K(e,r,n,s,!0)),()=>n;if(r.length===0){if(n=P(e,n,s),o)return n}else c?n.length===0?he(e,r,s):Ne(e,n,r):(n&&P(e),he(e,r));n=r}else if(t.nodeType){if(Array.isArray(n)){if(o)return n=P(e,n,s,t);P(e,n,null,t)}else n==null||n===""||!e.firstChild?e.appendChild(t):e.replaceChild(t,e.firstChild);n=t}else console.warn("Unrecognized value. Skipped inserting",t)}return n}function Y(e,t,n,s){let i=!1;for(let l=0,o=t.length;l<o;l++){let r=t[l],c=n&&n[l],u;if(!(r==null||r===!0||r===!1))if((u=typeof r)=="object"&&r.nodeType)e.push(r);else if(Array.isArray(r))i=Y(e,r,c)||i;else if(u==="function")if(s){for(;typeof r=="function";)r=r();i=Y(e,Array.isArray(r)?r:[r],Array.isArray(c)?c:[c])||i}else e.push(r),i=!0;else{const h=String(r);c&&c.nodeType===3&&c.data===h?e.push(c):e.push(document.createTextNode(h))}}return i}function he(e,t,n=null){for(let s=0,i=t.length;s<i;s++)e.insertBefore(t[s],n)}function P(e,t,n,s){if(n===void 0)return e.textContent="";const i=s||document.createTextNode("");if(t.length){let l=!1;for(let o=t.length-1;o>=0;o--){const r=t[o];if(i!==r){const c=r.parentNode===e;!l&&!o?c?e.replaceChild(i,r):e.insertBefore(i,n):c&&r.remove()}else l=!0}}else e.insertBefore(i,n);return[i]}const Z=Symbol("store-raw"),L=Symbol("store-node");function pe(e){let t;return e!=null&&typeof e=="object"&&(e[T]||!(t=Object.getPrototypeOf(e))||t===Object.prototype||Array.isArray(e))}function J(e,t=new Set){let n,s,i,l;if(n=e!=null&&e[Z])return n;if(!pe(e)||t.has(e))return e;if(Array.isArray(e)){Object.isFrozen(e)?e=e.slice(0):t.add(e);for(let o=0,r=e.length;o<r;o++)i=e[o],(s=J(i,t))!==i&&(e[o]=s)}else{Object.isFrozen(e)?e=Object.assign({},e):t.add(e);const o=Object.keys(e),r=Object.getOwnPropertyDescriptors(e);for(let c=0,u=o.length;c<u;c++)l=o[c],!r[l].get&&(i=e[l],(s=J(i,t))!==i&&(e[l]=s))}return e}function ee(e){let t=e[L];return t||Object.defineProperty(e,L,{value:t=Object.create(null)}),t}function te(e,t,n){return e[t]||(e[t]=ge(n))}function me(e){if(le()){const t=ee(e);(t._||(t._=ge()))()}}function Me(e){return me(e),Reflect.ownKeys(e)}function ge(e){const[t,n]=S(e,{equals:!1,internal:!0});return t.$=n,t}function be(e,t,n,s=!1){if(!s&&e[t]===n)return;const i=e[t],l=e.length;n===void 0?delete e[t]:e[t]=n;let o=ee(e),r;if((r=te(o,t,i))&&r.$(()=>n),Array.isArray(e)&&e.length!==l){for(let c=e.length;c<l;c++)(r=o[c])&&r.$();(r=te(o,"length",l))&&r.$(e.length)}(r=o._)&&r.$()}function Re(e,t){const n=Reflect.getOwnPropertyDescriptor(e,t);return!n||n.get||n.set||!n.configurable||t===T||t===L||(delete n.value,delete n.writable,n.get=()=>e[T][t],n.set=s=>e[T][t]=s),n}const Ve={get(e,t,n){if(t===Z)return e;if(t===T)return n;if(t===G)return me(e),n;const s=ee(e),i=s[t];let l=i?i():e[t];if(t===L||t==="__proto__")return l;if(!i){const o=Object.getOwnPropertyDescriptor(e,t),r=typeof l=="function";if(le()&&(!r||e.hasOwnProperty(t))&&!(o&&o.get))l=te(s,t,l)();else if(l!=null&&r&&l===Array.prototype[t])return(...c)=>R(()=>Array.prototype[t].apply(n,c))}return pe(l)?we(l):l},has(e,t){return t===Z||t===T||t===G||t===L||t==="__proto__"?!0:(this.get(e,t,e),t in e)},set(e,t,n){return R(()=>be(e,t,J(n))),!0},deleteProperty(e,t){return R(()=>be(e,t,void 0,!0)),!0},ownKeys:Me,getOwnPropertyDescriptor:Re};function we(e){let t=e[T];if(!t){Object.defineProperty(e,T,{value:t=new Proxy(e,Ve)});const n=Object.keys(e),s=Object.getOwnPropertyDescriptors(e);for(let i=0,l=n.length;i<l;i++){const o=n[i];if(s[o].get){const r=s[o].get.bind(t);Object.defineProperty(e,o,{get:r})}if(s[o].set){const r=s[o].set;Object.defineProperty(e,o,{set:u=>R(()=>r.call(t,u))})}}}return t}function Be(e,t){const n=J(e||{});return we(n)}const Ue=w('<div class="switcher"><input type="checkbox" id="cbx" style="display:none"><label for="cbx" class="toggle"><span>'),qe=e=>(()=>{const t=Ue(),n=t.firstChild;return n.addEventListener("change",()=>e.setState(!e.state)),x(()=>n.checked=!e.state),t})(),Fe=w('<div class="content__time"><div> </div><div>min</div><input type="number" min="0" max="60" maxlength="2"><div>sec</div><input type="number" min="0" max="60" maxlength="2">'),ye=e=>{const[t,n]=S(Math.floor(e.time/60)),[s,i]=S(e.time%60);return e.ref({allTime:()=>t()*60+s(),min:t,sec:s,setMin:n,setSec:i}),V(()=>{n(Math.floor(e.time/60)),i(e.time%60)}),(()=>{const l=Fe(),o=l.firstChild,r=o.firstChild,c=o.nextSibling,u=c.nextSibling,h=u.nextSibling,g=h.nextSibling;return E(o,()=>e.title,r),u.$$input=f=>n(Number(f.target.value)),g.$$input=f=>i(Number(f.target.value)),x(()=>u.value=t()),x(()=>g.value=s()),l})()};F(["input"]);const Ke=w('<div class="content__wrapper__time">'),Se=e=>{let t,n;const s=()=>{!t||!n||(n.allTime()<t.allTime()&&n.setSec(t.sec()),n.allTime()<t.allTime()&&n.setMin(t.min()))};return V(()=>{!t||!n||e.ref({startTime:t.allTime,endTime:n.allTime,checkInputsValues:s,clearValues:()=>{!t||!n||(t.setMin(0),t.setSec(0),n.setMin(0),n.setSec(0))}})}),(()=>{const i=Ke();return E(i,y(ye,{title:"start",get time(){return e.time.start},ref:l=>t=l}),null),E(i,y(ye,{title:"end",get time(){return e.time.end},ref:l=>n=l}),null),i})()},Je=w("<div>loop"),We=e=>{const[t,n]=S();return z(()=>{const s=t();if(s){const i=e.player();e.ref({checkInputsValues:s.checkInputsValues,startTime:s.startTime,endTime:s.endTime,apply:(l,o)=>{if(!i)return;const r=i.getCurrentTime();o!==0&&(r>=o||r<l)&&i.seekTo(l)}});return}}),[(()=>{const s=Je();return s.style.setProperty("text-align","center"),s})(),y(Se,{ref:n,get time(){return b.loopTime}})]},Ge=w("<div>skip"),He=w('<button class="btn mt-8">add'),Xe=w('<button class="btn mt-8">remove'),ze=w('<button class="btn mt-8">clear'),Qe=e=>{const[t,n]=S([]);z(()=>{if(t().length){const o=e.player();e.ref({checkInputsValues:()=>t().forEach(r=>r.checkInputsValues()),startTime:t().map(r=>r.startTime),endTime:t().map(r=>r.endTime),apply:r=>{if(!o)return;const c=o.getCurrentTime();r.forEach(u=>{u.end!==0&&c>=u.start&&c<u.end&&o.seekTo(u.end)})}})}});const s=()=>{b.skipTime.push({start:0,end:0})},i=()=>{b.skipTime.length!==1&&(b.skipTime.splice(-1),n([...t()].splice(-1)))},l=()=>{b.skipTime=b.skipTime.map(()=>({start:0,end:0})),t().forEach(o=>o.clearValues())};return[(()=>{const o=Ge();return o.style.setProperty("text-align","center"),o})(),y(Pe,{get each(){return b.skipTime},children:(o,r)=>y(Se,{ref:c=>n([...t(),c]),get time(){return b.skipTime[r]}})}),(()=>{const o=He();return o.$$click=s,o})(),(()=>{const o=Xe();return o.$$click=i,o})(),(()=>{const o=ze();return o.$$click=l,o})()]};F(["click"]);const Ye=w('<button class="btn mt-8">apply'),Ze=w('<button class="btn mt-8">cancel');let W=0;const et=()=>{const[e,t]=S(!0),n=document.querySelector("#ytd-player");let[s,i]=S(null),l,o;V(()=>{setTimeout(()=>{n&&i(n.player_)},500)});const r=()=>{const f=localStorage.getItem("yt-time");let d=JSON.parse(f||"[]");const A=new URLSearchParams(window.location.search).get("v");A&&(d.some(C=>C.id===A)?d=d.map(C=>C.id===A?{...C,time:b}:C):d=[...d,{id:A,time:b}],localStorage.setItem("yt-time",JSON.stringify(d)))},c=()=>{const f=l?.startTime()||0,d=l?.endTime()||0,k=[];return l&&(l.checkInputsValues(),b.loopTime={start:f,end:d}),o&&(o.checkInputsValues(),o.startTime.forEach((A,C)=>{const ve=o?.endTime[C]();ve!==void 0&&k.push({start:A(),end:ve})}),b.skipTime=k),r(),{loopTimeStart:f,loopTimeEnd:d,skipTime:k}},u=()=>{if(!s())return;const f=e(),{loopTimeStart:d,loopTimeEnd:k,skipTime:A}=c();clearInterval(W),W=setInterval(()=>{f?l?.apply(d,k):o?.apply(A)},1e3)},h=()=>{clearInterval(W),W=0};return[y(qe,{get state(){return e()},setState:f=>{c(),t(f)}}),I((()=>{const f=I(()=>!!e());return()=>f()?y(We,{ref:d=>l=d,player:s}):y(Qe,{ref:d=>o=d,player:s})})()),(()=>{const f=Ye();return f.$$click=u,f})(),(()=>{const f=Ze();return f.$$click=h,f})()]};F(["click"]);const tt=w("<div>"),nt=w('<div class="menu__root"><svg class="settings" xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" viewBox="0 0 16 16"><path d="M9.405 1.05c-.413-1.4-2.397-1.4-2.81 0l-.1.34a1.464 1.464 0 0 1-2.105.872l-.31-.17c-1.283-.698-2.686.705-1.987 1.987l.169.311c.446.82.023 1.841-.872 2.105l-.34.1c-1.4.413-1.4 2.397 0 2.81l.34.1a1.464 1.464 0 0 1 .872 2.105l-.17.31c-.698 1.283.705 2.686 1.987 1.987l.311-.169a1.464 1.464 0 0 1 2.105.872l.1.34c.413 1.4 2.397 1.4 2.81 0l.1-.34a1.464 1.464 0 0 1 2.105-.872l.31.17c1.283.698 2.686-.705 1.987-1.987l-.169-.311a1.464 1.464 0 0 1 .872-2.105l.34-.1c1.4-.413 1.4-2.397 0-2.81l-.34-.1a1.464 1.464 0 0 1-.872-2.105l.17-.31c.698-1.283-.705-2.686-1.987-1.987l-.311.169a1.464 1.464 0 0 1-2.105-.872l-.1-.34zM8 10.93a2.929 2.929 0 1 1 0-5.86 2.929 2.929 0 0 1 0 5.858z">'),[$e,st]=S(!1),[lt,Te]=S("open"),b=Be({loopTime:{start:0,end:0},skipTime:[{start:0,end:0}]}),it=()=>{const e=()=>{Te("close"),setTimeout(()=>{st(!$e()),Te("open")},100)};return V(()=>{const n=new URLSearchParams(window.location.search).get("v"),s=localStorage.getItem("yt-time");if(s){const l=JSON.parse(s).find(o=>o.id===n);if(l){const{loopTime:o,skipTime:r}=l.time;b.loopTime=o,b.skipTime=r}}}),(()=>{const t=nt(),n=t.firstChild;return n.$$click=e,E(t,y(Ie,{get when(){return $e()},get children(){const s=tt();return E(s,y(et,{})),x(()=>De(s,`content ${lt()}`)),s}}),null),t})()};F(["click"]),((e,t)=>{const n=t?.timeDisconnect??1e4;return new Promise(s=>{const i=document.querySelector(e);if(i)return s(i);const l=new MutationObserver(o=>{const r=document.querySelector(e);r&&(s(r),l.disconnect())});setTimeout(()=>{document.querySelector(e)||l.disconnect()},n),l.observe(document.body,{childList:!0,subtree:!0})})})("#owner").then(e=>{Le(()=>y(it,{}),e)})})();
